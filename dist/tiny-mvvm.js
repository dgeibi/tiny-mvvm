!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["tiny-mvvm"]=n():e.bindViewToData=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n){function t(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(e){var n=[];return e.replace(/{{([^}]+)}}/g,function(e,t){n.push(t)}),n}function o(e,n){return(new(Function.prototype.bind.apply(Function,[null].concat(t(Object.keys(e)),["return "+n])))).apply(void 0,t(Object.values(e)))}function u(e,n){var t=r(e);return 0===t.length?e:t.map(function(e){return o(n,e)}).reduce(function(e,n){return e.replace(/{{[^}]+}}/,n)},e)}function c(e){for(var n=void 0,t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);n=r.nextNode();)t.push(n);return t}function a(e,n,t){var r=n.map(function(e){return u(e,t)});e.forEach(function(e,n){e.nodeValue!==r[n]&&(e.nodeValue=r[n])})}function i(e,n){var r={},o=c(e).filter(function(e){return e.nodeValue}),u=o.map(function(e){return e.nodeValue}),i=Array.from(document.querySelectorAll("[data-bind]")),f=i.map(function(e){return e.dataset.bind});[].concat(t(new Set([].concat(t(f),t(Object.keys(n)))))).forEach(function(e){r[e]=n[e];var t=document.querySelector('[data-bind="'+e+'"]'),c=t&&"checkbox"===t.type?"checked":"value";if(Object.defineProperty(n,e,{set:function(n){n!==r[e]&&(r[e]=n,t&&(t[c]=n),a(o,u,r))},get:function(){return r[e]}}),t){var i=function(){var r=t[c];"integer"===t.dataset.unit?r=Math.trunc(r):"number"===t.dataset.unit&&(r=Number(r)),n[e]=r};if("INPUT"===t.tagName&&"checkbox"!==t.type||"TEXTAREA"===t.tagName?t.addEventListener("input",i):t.addEventListener("change",i),"checkbox"===t.type){var f=Boolean(r[e]);r[e]=f,t[c]=f}else void 0!==r[e]&&(t[c]=r[e])}}),a(o,u,r)}e.exports=i}])});